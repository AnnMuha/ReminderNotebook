<Window x:Class="ReminderNotebook.Views.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:utils="clr-namespace:ReminderNotebook.Utils"
        Title="ReminderNotebook"
        Height="500" Width="800"
        Background="#f5f7fa"
        WindowStartupLocation="CenterScreen">

    <Window.Resources>
        <utils:EmptyStringToVisibilityConverter x:Key="EmptyStringToVisibilityConverter"/>
        <utils:PriorityColorConverter x:Key="PriorityColorConverter"/>
    </Window.Resources>

    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <!-- Заголовок -->
            <RowDefinition Height="Auto"/>
            <!-- Пошук / фільтр / сортування -->
            <RowDefinition Height="*"/>
            <!-- Список -->
            <RowDefinition Height="Auto"/>
            <!-- Кнопки -->
        </Grid.RowDefinitions>

        <!-- Заголовок -->
        <TextBlock Grid.Row="0"
                   Text="📋 Мої нагадування"
                   FontSize="26"
                   FontWeight="Bold"
                   Foreground="#2c3e50"
                   Margin="0 0 0 20"/>

        <!-- Пошук + фільтр + сортування -->
        <StackPanel Grid.Row="1" Margin="0 0 0 10" HorizontalAlignment="Left">

            <!-- Верхній рядок підписів -->
            <StackPanel Orientation="Horizontal" Margin="0 0 0 5">
                <TextBlock Width="200" />
                <TextBlock Text="Пріоритет -->" Width="150" Margin="0 0 10 0" FontWeight="Bold" VerticalAlignment="Bottom" Foreground="#FF2C3E50"/>
                <TextBlock Text="Сортування -->" Width="150" FontWeight="Bold" VerticalAlignment="Bottom" Foreground="#FF2C3E50"/>
            </StackPanel>

            <!-- Пошук + фільтр + сортування -->
            <StackPanel Orientation="Horizontal">
                <!-- Пошук -->
                <Grid Width="200" Height="28" Margin="0 0 10 0">
                    <TextBox x:Name="SearchBox"
                     Text="{Binding SearchQuery, UpdateSourceTrigger=PropertyChanged}"
                     VerticalContentAlignment="Center"
                     Padding="5"/>
                    <TextBlock Text="🔍 Пошук..."
                       Foreground="Gray"
                       FontStyle="Italic"
                       VerticalAlignment="Center"
                       Margin="5 0 0 0"
                       IsHitTestVisible="False"
                       Visibility="{Binding Text, ElementName=SearchBox, Converter={StaticResource EmptyStringToVisibilityConverter}}"/>
                </Grid>

                <!-- Фільтр -->
                <ComboBox Width="150"
                  ItemsSource="{Binding PriorityOptions}"
                  SelectedItem="{Binding SelectedPriorityFilter, Mode=TwoWay}"
                  ToolTip="Фільтр за пріоритетом"
                  Margin="0 0 10 0"/>

                <!-- Сортування -->
                <ComboBox Width="150"
                  ItemsSource="{Binding SortOptions}"
                  SelectedItem="{Binding SelectedSortOption, Mode=TwoWay}"
                  ToolTip="Сортування нагадувань"/>
            </StackPanel>
        </StackPanel>

        <!-- Список нагадувань -->
        <Border Grid.Row="2"
                Background="White"
                CornerRadius="10"
                Padding="10"
                BorderBrush="#dcdfe3"
                BorderThickness="1">
            <ListBox ItemsSource="{Binding FilteredReminders}"
                     SelectedItem="{Binding SelectedReminder, Mode=TwoWay}"
                     BorderThickness="0">
                <ListBox.ItemTemplate>
                    <DataTemplate>
                        <Border Padding="10" Margin="0 5"
                                CornerRadius="6"
                                Background="#ecf0f1">
                            <StackPanel>
                                <TextBlock Text="{Binding Title}"
                                           FontWeight="Bold"
                                           FontSize="14"/>
                                <TextBlock Text="{Binding ReminderTime, StringFormat=О {0:dd.MM.yyyy HH:mm}}"
                                           Foreground="Gray"
                                           FontSize="12"/>
                                <TextBlock Text="{Binding Priority}"
                                           Foreground="{Binding Priority, Converter={StaticResource PriorityColorConverter}}"
                                           FontSize="12"/>
                            </StackPanel>
                        </Border>
                    </DataTemplate>
                </ListBox.ItemTemplate>
            </ListBox>
        </Border>

        <!-- Кнопки -->
        <StackPanel Grid.Row="3"
                    Orientation="Horizontal"
                    HorizontalAlignment="Right"
                    Margin="0 20 0 0">
            <Button Content="➕ Додати"
                    Width="100"
                    Margin="5"
                    Command="{Binding AddCommand}"
                    Background="#27ae60"
                    Foreground="White"
                    FontWeight="Bold"/>
            <Button Content="✏️ Редагувати"
                    Width="100"
                    Margin="5"
                    Command="{Binding EditCommand}"
                    Background="#2980b9"
                    Foreground="White"
                    FontWeight="Bold"/>
            <Button Content="🗑️ Видалити"
                    Width="100"
                    Margin="5"
                    Command="{Binding DeleteCommand}"
                    Background="#c0392b"
                    Foreground="White"
                    FontWeight="Bold"/>
        </StackPanel>
    </Grid>
</Window>